---
layout: post
tag: [ 岐大祭2018 ]
---

この記事は、岐大祭に向けてアドベントカレンダー的な記事を書く企画の 6 日目です。
私は、音声認識を使ってキャラクターを動かすゲームを作ったので主に音声認識について書いていこうと思います。多分、他の記事よりかは初心者向けかと思われます。

# 概要

このゲームはUnityで制作した、Android用のゲームです。キリンのキャラクター「ジラ太朗」に音声で命令してゴールまで導くゲームです。例えば「すすめ」と言ったら進むし、「ジャンプ」と言ったらジャンプします。ムーンサルトさせたり、マシンガンを放ったりすることもできます。いろいろとはっちゃけてます。

# 音声認識について

では、音声認識の方法について書いていこうと思います。まず、一般的なAndroidアプリ開発ではAPIを使うことで、簡単に音声認識をすることができます。代表的なAPIとして「Speech Recognizer」というものがあり、このゲームでもこれを使っています。しかし、Unityではこれだけでは音声認識はできません。一般的なAndroidあるプリ開発が、javaで行われるのに対し、UnityはC#であるためです。そこでUnityには**ネイティブプラグイン**という機能があります。ネイティブプラグインを使うと「システムコールやサードパティのコードライブラリなどといった、元々 Unity で使用できない機能にアクセスすることができます」([Unityマニュアル](https://docs.unity3d.com/ja/current/Manual/Plugins.html)
より引用)。これを利用してSpeech RecognizerをUnityに適用します。
ネイティブプラグインの流れの一例は以下のようです。

1. eclipse, Android Studio などでjavaコードを書く。
2. aarファイル, xmlファイルを作成
3. Unityにaar,xmlをおく
4. C#コードを書いてプラグインを適用

...なんでこんな大雑把なのかといいますと、実際はこんなことやってないんです。というのもすでにこのようなことをやっている方がいまして、プラグインのサンプルがネットに公開されていたためです。これをお借りして自分なりにアレンジして使用しました。お借りしたものは[こちら](http://fantom1x.blog130.fc2.com/blog-entry-273.html?sp)で公開されています。そのため私から音声認識の実装方法に関してこれ以上言えることはありません。ただ、Unityは人口が多く、自分がやろうと思っていることをすでにやっている人がいて、やり方やサンプルが公開されているということはよくあることだと思います。だからまず、何か公開されているものを探すのも一つの手だと思います。
