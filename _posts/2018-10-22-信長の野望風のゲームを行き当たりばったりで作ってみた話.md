---
layout: post
tag: [岐大祭2018]
---

この記事は、岐大祭に向けてアドベントカレンダー的な記事を書く企画の ３日目です。

私が作ったのは信長の野望風のゲームを東方のキャラを使用して同人ゲームとして仕上げてみたものです。
このゲームは、私がUnityのUI周りの勉強がてらに作成されたものなのでとてもごちゃごちゃしています笑

そんな中でも少しでも参考・転用できる技術があれば、という記事になります。

## 信長の野望
`信長の野望`とは[コーエーテクモゲームス](https://www.gamecity.ne.jp/)の人気シリーズである歴史シミュレーションである。

## UI
#### Buttonクリック時のスクリプト呼び出しを共通化する
（１）こういったButtonの多くなるゲームでは[スクリプト呼び出しを共通化](https://fantastic-works.com/archives/148)することによってScriptの管理を
簡潔にすることができる。

（２）各SceneにUIの処理を行う[シングルトン](http://hiyotama.hatenablog.com/entry/2015/06/26/090000)にButtonを押した際に呼びたいメソッドを
記述しておき、UnityのInspecter上からそのメソッドをクリックイベントに登録する。
この際、Sceneを跨ぐシングルトンを参照したい場合は、
```
Button
　↓参照
そのSceneのUIを統括するシングルトン
　↓参照
全てのSceneで使用されるシングルトン（今回の場合、BGMControllerなど）
```
の手順で参照しないと、シングルトンの仕様上NullExceptionを起こすので注意する。

#### Layout
UIのLayoutは主に`Vertical Layout Group(以下、VLG)`と`Horizontal Layout Group(以下、HLG)`と`Content Size Fitter(以下、CSF)`を使用しています。
VLGとHLGは子オブジェクトの配置を良い感じにしてくれるConponentで、CSFはVLGやHLGで配置した子オブジェクトの大きさに応じて親オブジェクトの大きさを
良い感じに調節してくれるConponentです。

使用方法は簡単で、並べたい方向に応じてVLGまたはHLGをアタッチしてUI群を整頓し、そのあとCSFをアタッチして有効にすることで
UIを良い感じに簡単に配置することが出来ます。

